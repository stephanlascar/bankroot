{% extends 'layout.html' %}
{% set active_page = 'account' %}

{% macro category_icon(category) -%}
    {{ 'fa-phone' if category == 'Abonnements' }}
    {{ 'fa-shopping-cart' if category == 'Achats & Shopping' }}
    {{ 'fa-cutlery' if category == 'Alimentation & Restaurant' }}
    {{ 'fa-car' if category == 'Auto & Transport' }}
    {{ 'fa-bank' if category == 'Banque' }}
    {{ 'fa-tag' if category == 'Divers' }}
    {{ 'fa-eye' if category == 'Esthétique & Soins' }}
    {{ 'fa-home' if category == 'Logement' }}
    {{ 'fa-ticket' if category == 'Loisirs & Sorties' }}
    {{ 'fa-credit-card' if category == 'Retraits, Chèques et Virements' }}
    {{ 'fa-heart' if category == 'Santé' }}
    {{ 'fa-share' if category == 'Virements internes' }}
    {{ 'fa-euro' if category == 'Dépôt d\'argent' }}
    {{ 'fa-usd' if category == 'Impôts & Taxes' }}
    {{ 'fa-mail-reply' if category == 'Remboursements' }}
    {{ 'fa-graduation-cap' if category == 'Salaires' }}
{%- endmacro %}

{% block content %}
<div class="row">
    <div class="col-sm-4 col-md-3 sidebar">
        <ul class="nav nav-sidebar">
            {% for current_account in all_accounts %}
            <li class="{{ 'active' if current_account.id == account.id }}"><a href="{{ url_for('show_account', account_id=current_account.bank_id) }}">{{ current_account.label }} <p class="pull-right">{{ current_account.balance }} €</p></a></li>
            {% endfor %}
        </ul>
    </div>
    <div class="col-sm-8 col-sm-offset-4 col-md-9 col-md-offset-3 main">
        <h1 class="page-header">{{ account.label }}<p class="pull-right {{ 'text-primary' if account.balance > 0 else 'text-danger'}}">{{ account.balance }} €</p></h1>

        <h5 class="sub-header">Mise à jour : {{ account.date|humanize }}</h5>
        <div class="table-responsive">
            <table class="table table-striped table-hover">
                <tbody>
                {% for transaction in account.transactions %}
                <tr class="{{ 'success' if transaction.amount > 0 }}">
                    <td>{{ transaction.date|dateformat(format='d MMM') }}</td>
                    <td>{{ transaction.label }}</td>
                    <td><span class="label label-default"><i class="fa {{ category_icon(transaction.category) }}"></i>&nbsp;&nbsp;{{ transaction.category }}</span></td>
                    <td class="text-right">{{ transaction.amount }} €</td>
                </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}
